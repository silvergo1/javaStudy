# 기본형과 참조형

- 기본형 (Primitive Type) : `int`, `long`, `double`, `boolean` 처럼 변수에 사용할 값을 넣을 수 있는 데이터 타입
- 참조형 (Reference Type) : `Student studen1`, `int[] students` 와 같이 데이터에 접근하기 위한 참조(주소)를 저장하는 데이터 타입. **참조형은 객체 또는 배열에 사용**

## 기본형 vs 참조형 - 기본
+ **기본형**
  + 숫자 `10`, `20`과 같이 실제 사용하는 값을 변수에 담을 수 있음
  + 해당 값을 바로 사용 할 수 있음
+ **참조형**
  + 실제 사용하는 값을 변수에 담는 것이 아님
  + 이름 그대로 실제 객체의 위치(참조, 주소)를 저장
  + 참조형에는 객체와 배열이 있음
    + **객체** : `.`(dot)을 통해서 메모리 상에 생성된 객체를 찾아가야 사용할 수 있음
    + **배열** : `[]`를 통해서 메모리 상에 생성된 배열을 찾아가야 사용할 수 있음

## 기본형 vs 참조형 - 계산
+ **기본형**
  + 들어있는 값을 그래도 계산에 사용할 수 있음
  + 숫자 같은 것 들은 바로 계산 할 수 있음
```java
int a = 10, b = 20;
int sum = a + b;
```
+ **참조형**
  + 들어있는 참조값을 그래도 사용할 수 없음
  + 주소지만 가지고는 할 수 있는게 없음
  + 주소지에 가야 실체가 있음
```java
Student s1 = new Student();
Student s2 = new Student();
s1 + s2 //오류 발생
```
```java
Student s1 = new Student();
s1.grade = 100;
Student s2 = new Student();
s2.grade = 90;
int sum = s1.grade + s2.grade; //연산 가능
```
### 쉽게 이해하는 팁
기본형을 제외한 나머지는 모두 참조형
+ 기본형
  + 소문자로 시작
  + `int`, `long`, `double`, `boolean` 모두 소문자로 시작
  + 기본형은 자바가 기본으로 제공하는 데이터 타입
  + 기본형은 개발자가 새로 정의할 수 없다
  + 개발자는 참조형인 클래스만 직접 정의할 수 있음
+ 클래스
  + 대문자로 시작
  + `Student`
  + 클래스는 모두 참조형

### 참고 - String
자바에서 `String`은 특별함 <br>
`String` == 클래스. 따라서 참조형 <br>
그런데 기본형처럼 문자 값을 바로 대입 할 수 있음 <br>
문자는 매우 자주 다루기 때문에 자바에서 특별하게 편의 기능을 제공 <br>

## 기본형 vs 참조형2 - 변수 대입
대원칙 : 자바는 항상 변수의 값을 복사해서 대입 <br>
자바에서 변수에 값을 대입하는 것은 변수에 들어 있는 값을 <b>복사해서 대입</b>하는 것 <br>
기본형, 참조형 모두 항상 변수에 있는 값을 복사해서 대입 <br>
`기본형`이면 변수에 들어 있는 실제 사용하는 값을 복사 해서 대입 <br>
`참조형`이면 변수에 들어 있는 참조값을 복새해서 대입

+ 기본형 대입
```java
int a = 10;
int b = a;
```
+ 참조형 대입
```java
Student s1 = new Studen();
Student s2 = s1;
```
기본형은 변수에 값을 대입하더라고 실제 사용하는 값이 변수에 바로 들어있기 때문에 해당 값만 복사해서 대입한다고 생각하면 쉽게 이해할 수 있음. <br>
<b>참조형의 경우 실제 사용하는 객체가 아니라 객체의 위치를 가리키는 참조값만 복사</b>

## 기본형 vs 참조형 3 - 메서드 호출
메서드를 호출할 때 사용하는 매개변수(파라미터)도 결국 변수 <br>
메서드를 호출할 때 매개변수에 값을 전달하는 것도 값을 복사해서 전달

자바에서 메서드의 매개변수(파라미터)는 항상 값에 의해 전달 됨 <br>
그러나 이 값이 실제 값이냐, 참조(메모리 주소) 값이냐에 따라 동작이 달라짐

+ 기본형
  + 메서드로 기본형 데이터를 전달하면, 해당 값이 복사되어 전달
  + 메서드 내부에서 매개변수(파라미터)의 값을 변경해도, 호출자의 변수 값에는 영향이 없음
+ 참조형
  + 메서드로 참조형 데이터를 전달하면, 참조값이 복사되어 전달
  + 메서드 내부에서 매개변수(파라미터)로 전달된 개게의 멤버 변수를 변경하면, 호출자의 객체도 변경

## 변수와 초기화
### 변수의 종류
+ 멤버 변수 (필드) : 클래스에서 선언
+ 지역 변수
  + 메서드에서 선언 (매개 변수도 지역 변수의 한 종류)
  + 이름 그대로 특정 지역에서만 사용되는 변수라는 뜻
  + 메서드 블록에서만 사용 됨. 메서드가 끝내면 제거됨

### 변수의 값 초기화
+ 멤버 변수 : 자동 초기화
  + 인스턴스의 멤버 변수는 인스턴스를 생성할 때 자동으로 초기화 됨
  + 숫자 (`int`) = `0`, `boolean`=`false`
  + 참조형 = `null` (`null`값은 참조할 대상이 없다는 뜻으로 사용 됨)
  + 개발자가 초기 값을 직접 지정 할 수 있음
+ 지역 변수 : 수동 초기화
  + 지역 변수는 항상 직접 초기화 해야됨

## Null
참조형 변수에는 항상 객체가 있는 위치를 가리키는 참조값이 들어감. <br>
참조형 변수에서 아직 가리키는 대상이 없다면 `null`이라는 특별한 값을 넣어둘 수 있음. <br>
`null`은 값이 존재하지 않은, 없다는 뜻임

**GC - 아무도 참조하지 않는 인스턴스 최후** <br>
아무도 참조 하지 않게 되면 참조값을 다시 구할 방법이 없음 <br>
따라서 해당 인스턴스에 다시 접근할 방법이 없음 <br>
이렇게 아무도 참조하지 않는 인스턴스는 사용되지 않고 메모리 용량만 차지할 뿐. <br>
C와 같은 과거 프로그래밍 언어는 개발자가 직접 명령어를 사용해서 인스턴스를 메모리에서 제거해야 했음. <br>
만약 실수로 인스턴스 삭제를 누락하면 메모리에 사용하지 않는 객체가 가즉해져서 메모리 부족 오류가 발생하게 됨. <br>
자바에서는 이런 과정을 자동으로 처리해줌.
아무도 참조하지 않는 인스턴스가 있으면 JVM의 GC(가비지 컬렉션)가 더 이상 사용하지 않는 인스턴스라고 판단하고 해당 인스턴스를 자동으로 메모리에서 제거.

객체는 해당 객체를 참조하는 곳이 있으면, JVM이 종료할 때 까지 계속 생존. <br>
그런데 중간에 해당 객체를 참조하는 곳이 모두 사라지면 그때 JVM은 필요 없는 객체로 판단하고 GC(가비지 컬렉션)를 사용해서 제거

## NullPointerException
`NullPointerException`은 이름 그대로 `null`을 가리키다(Pointer)인데, 이때 발생하는 예외(Exception).
`null`은 없다는 뜻이므로 결국 주소가 없는 곳을 찾아갈 때 발생하는 예외.

객체를 참조할 때는 `.`(dot)을 사용 <br>
이렇게 참조하면 참조값을 사용해서 해당 객체를 찾아갈 수 있음. <br>
**참조값이 `null`이라면 값이 없다는 뜻이므로, 찾아갈 수 있는 객체 (인스턴스)가 없음.** <br>
`NullPointerException`은 이처럼 `null`에 `.`(dot)을 찍었을 때 발생

> ## 정리
> **대원칙 : 자바는 항상 변수의 값을 복사해서 대입** <br>
> 자바에서 변수에 값을 대입하는 것은 변수에 들어 있는 값을 복사해서 대입하는 것 <br>
> 기본형, 참조형 모두 항상 변수에 있는 값을 복사해서 대입 <br>
> 기본형이면 변수에 들어있는 실제 사용하는 값을 복사해서 대입 <br>
> 참조형이면 변수에 들어 있는 참조값을 복사해서 대입 <br>
> 기본형이든 참조형이든 변수의 값을 대입하는 방식은 같음 <br>
> 하지만 기본형과 참조형에 따라 동작하는 방식이 달라짐 <br>
> 
> ### 기본형 vs 참조형 - 기본
> + 자바의 데이터 타입을 가장 크게 보면 기본형과 참조형으로 나눌 수 있다.
> + 기본형을 제외한 나머지 변수는 모두 참조형이다.
> + 클래스와 배열을 다루는 변수는 참조형이다.
> + 기본형 변수는 값을 직접 저장하지만, 참조형 변수는 참조(주소)를 저장
> + 기본형 변수는 산술 연산을 수행할 수 있지만, 참조형 변수는 산술 연산을 수행할 수 없다.
> + 기본형 변수는  `null`을 할당 할 수 없지만, 참조형 변수는 `null`을 할당 할 수 있다.
> 
> ### 기본형 vs 참조형 - 대입
> + 기본형과 참조형 모두 대입시 변수 안에 있는 값을 읽고 복사해서 전달한다.
> + **기본형은 사용하는 값을 복사해서 전달하고, 참조형은 참조값을 복사해서 전달한다.** <br>
> 실제 인스턴스가 복사되는 것이 아니다. 인스턴스를 가리키는 참조값을 복사해서 전달하는 것이다.
> 따라서 하나의 인스턴스를 여러곳에서 참조할 수 있다.
> + 기본형은 사용하는 값, 참조형은 참조값이 들어있음. <br>
> 변수에 어떤 값이 들어있든 간에 그 값을 그대로 복사해서 전달.
> 
> ### 기본형 vs 참조형 - 메서드 호출
> + 메서드 호출시 기본형은 메서드 내부에서 매개변수(파라미터)의 값을 변경해도 호출자의 변수 값에는 영향 x
> + 메서드 호출시 참조형은 메서드 내부에서 매개변수(파라미터)로 전달된 객체의 멤버 변수를 변경하면, 호출자의 객체도 변경됨